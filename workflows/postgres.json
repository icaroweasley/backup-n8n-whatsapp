{"updatedAt":"2025-12-02T18:07:35.639Z","createdAt":"2025-11-28T14:43:41.171Z","id":"1Xwz4rUeucsgxhh0","name":"Postgres","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[0,0],"id":"3ec537d2-6a15-4322-a2d3-2fd443767e52","name":"When clicking ‘Execute workflow’"},{"parameters":{"operation":"executeQuery","query":"-- 1. Garante que a tabela existe\nCREATE TABLE IF NOT EXISTS clientes (\n    id SERIAL PRIMARY KEY,\n    instance_name TEXT UNIQUE NOT NULL,\n    system_prompt TEXT,\n    spreadsheet_id TEXT,\n    calendar_id TEXT\n);\n\n-- 2. Insere os dados LIMPOS (Sem variáveis {{ }})\nINSERT INTO clientes (instance_name, spreadsheet_id, calendar_id, system_prompt)\nVALUES (\n    'karu', \n    '16-380BC81KxckZGpYEvlgp0sCG5oTsgE6WCYfmsQS8I',\n    '[\n        {\n            \"medico\": \"Dr. Agenda Um\", \n            \"email\": \"1c8c9687e412263a98e1f0b46628992c7b58b8e5329632a570af778fddb87ad7@group.calendar.google.com\"\n        },\n        {\n            \"medico\": \"Dra. Agenda Dois\", \n            \"email\": \"9780f288eb235b0ad9d0ece7df154e8f28e0f2a1f926767a7c8c1e1a04421939@group.calendar.google.com\"\n        }\n    ]',\n    $$\n    Função:\n    Você se chama \"Pensando AI\", atua no atendimento da Clínica Multi-Saúde.\n    \n    MÉDICOS E AGENDAS:\n    Consulte a lista de ferramentas (calendarId) para ver os e-mails dos médicos disponíveis.\n    (Sempre verifique qual médico o paciente quer antes de agendar).\n\n    LOCALIZAÇÃO:\n    - Endereço: Rua Formoso, 100, Setor America.\n    \n    VALORES:\n    - Consulta: R$ 600,00 (Aceita PIX, Dinheiro, Cartão).\n    - Convênio: Unimed.\n\n    REGRAS DE AGENDAMENTO:\n    1. Agendamentos têm duração fixa de 30 minutos.\n    2. Nunca agende datas passadas ou fora do horário (08:00 às 18:00).\n    3. Primeiro delete o horário antigo se for remarcação.\n    4. O \"Summary\" do evento deve ser: \"Nome Paciente - Nome Médico\".\n    5. O \"Description\" deve conter o telefone do paciente (fornecido no contexto).\n\n    IMPORTANTE:\n    - Não confirme o agendamento sem antes receber o \"sucesso\" da ferramenta Google Calendar.\n    $$\n)\nON CONFLICT (instance_name) \nDO UPDATE SET \n    spreadsheet_id = EXCLUDED.spreadsheet_id,\n    calendar_id = EXCLUDED.calendar_id,\n    system_prompt = EXCLUDED.system_prompt;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[208,0],"id":"1e10d9c1-9ce5-4ccd-a83f-d09a398d221c","name":"Execute a SQL query","credentials":{"postgres":{"id":"MY2N95aYUWR6kF9X","name":"Postgres account"}}}],"connections":{"When clicking ‘Execute workflow’":{"main":[[{"node":"Execute a SQL query","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"a98d50d6-8143-416e-9d6f-5c140e48a843","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-11-28T14:43:41.171Z","createdAt":"2025-11-28T14:43:41.171Z","role":"workflow:owner","workflowId":"1Xwz4rUeucsgxhh0","projectId":"5OFwUiu2XaJEkX8v"}],"activeVersion":null,"tags":[],"safeFileName":"postgres.json"}